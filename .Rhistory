library(tidyverse)
foods = read_csv('foods.csv')
View(foods)
View(foods)
recipes = read_csv('recipes.csv')
View(recipes)
View(recipes)
library(tidyverse)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R')
View(foods)
View(foods)
head(foods)
colnames(foods)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R')
foods_cols = colnames(foods)
recipes_cols = colnames(recipes)
union(foods_cols, recipes_cols)
intersect(foods_cols, recipes_cols)
setdiff(recipes_cols, foods_cols)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R')
setdiff(recipes_cols, foods_cols)
intersect(foods_cols, recipes_cols)
setdiff(foods_cols, recipes_cols)
foods$bromine
right_columns = intersect(foods_cols, recipes_cols)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R')
View(foods)
View(recipes)
goal = read_csv('goal.csv')
View(goal)
right_columns = colnames(goal)
foods = foods[,right_columns]
View(foods)
View(foods)
View(goal)
View(goal)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R')
setdiff(right_columns, goal_columns)
setdiff( goal_columns, right_columns)
goal %<>% rename('fats' = 'fat')
goal %<>% rename('fat' = 'fats')
View(goal)
View(foods)
right_columns
sort(right_columns)
goal %<>% rename(
'fat' = 'fats',
'calories' = 'energy',
'proteins' = 'protein',
'carbohydrates' = 'carbohydrate',
'chromium' = 'chrome',
'omega3' = 'omega_3',
'selenium' = 'selen'
)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
goal = read_csv('goal.csv')
View(goal)
View(foods)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
mat = matrix(0, nrow = 4, ncol = length(right_columns))
rownames(mat) = c('day_bottom','day_top','week_bottom', 'week_top')
colnames(mat) = right_columns
View(mat)
mat = tibble(mat)
View(mat)
mat = matrix(1, nrow = 4, ncol = length(right_columns))
rownames(mat) = c('day_bottom','day_top','week_bottom', 'week_top')
colnames(mat) = right_columns
mat = tibble(mat)
mat = matrix(1, nrow = 4, ncol = length(right_columns))
rownames(mat) = c('day_bottom','day_top','week_bottom', 'week_top')
colnames(mat) = right_columns
mat = as.tibble(mat)
mat$energy = c(0.93, 1.07, 0.97, 1.03)
View(mat)
View(foods)
right_columns
sort(right_columns)
mat[,c('beta_carotene',
'vitamin_b1',
'vitamin_b2','vitamin_b5','vitamin_b6','vitamin_b9','vitamin_c',
'vitamin_e','vitamin_pp','vitamin_k','vitamin_h','chlorine','magnesium',
'sodium','phosphorus','iron','iodine','manganese',
'copper', 'molybdenum','cobalt',
'selen','serine', 'chrome','zinc')] = c(0.8, 3.5, 0.95, 3.5)
View(mat)
bad_cols = sapply(mat, function(cl) sum(cl == 1)==4)
View(mat)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/borders.R', encoding = 'UTF-8')
View(mat)
mat[,-bad_cols]
mat[,!bad_cols]
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/borders.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/borders.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/borders.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/borders.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/borders.R', encoding = 'UTF-8')
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
borders = read_csv('borders.csv')
tmp = intersect(goal_columns, colnames(borders))
borders = borders[,tmp]
tmp = setdiff(goal_columns, tmp)
View(borders)
borders[,tmp] = c(1, 10, 1, 10)
sum(colnames(borders)!=goal_columns)
# сделать порядок в коридорах таким же, как у цели
borders = borders[, goal_columns]
View(borders)
View(goal)
borders * goal
as.matrix(borders) * as.matrix(goal)
as.numeric(borders) * as.numeric(goal)
as.numeric(goal)
as.numeric(borders)
as.matrix(borders)
as.matrix(borders) * as.numeric(goal)
View(borders)
as.matrix(borders) * t(as.numeric(goal))
t(as.numeric(goal))
as.matrix(borders)
borders * t(as.numeric(goal))
borders[1:4,] * t(as.numeric(goal))
borders[1:4,] * as.numeric(goal)
for(i in 1:4){
borders[i,] = borders[i,] * as.numeric(goal)
}
View(borders)
View(goal)
View(goal)
library(tidyverse)
library(magrittr)
# просто считываю данные и удаляю лишние столбцы
foods = read_csv('foods.csv')
recipes = read_csv('recipes.csv')
foods %<>% select_if(is.numeric) %>%
select(-category_id, -general, -id_1, -food_id, -id_2, -food_id_1, -id_3, food_id_2, -food_id_2)
recipes %<>% select_if(is.numeric) %>% select(-recipe_id)
# отбираю только общие столбцы
foods_cols = colnames(foods)
recipes_cols = colnames(recipes)
intersect(foods_cols, recipes_cols)
setdiff(recipes_cols, foods_cols)
setdiff(foods_cols, recipes_cols)
right_columns = intersect(foods_cols, recipes_cols)
foods = foods[,right_columns]
recipes = recipes[,right_columns]
goal = read_csv('goal.csv')
goal_columns = colnames(goal)
View(goal)
View(foods)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
View(foods)
library(tidyverse)
library(magrittr)
# просто считываю данные и удаляю лишние столбцы
foods = read_csv('foods.csv')
recipes = read_csv('recipes.csv')
foods %<>% select_if(is.numeric) %>%
select(-category_id, -general, -id_1, -food_id, -id_2, -food_id_1, -id_3, food_id_2, -food_id_2)
recipes %<>% select_if(is.numeric) %>% select(-recipe_id)
View(foods)
foods = read_csv('foods.csv')
View(foods)
library(tidyverse)
recipes = read_csv('recipes.csv')
View(recipes)
source('C:/Users/qtckp/OneDrive/Рабочий стол/diet_first_try/read_data.R', encoding = 'UTF-8')
View(recipes)
View(goal)
